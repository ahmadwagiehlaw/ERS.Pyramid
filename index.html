<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الهرم الغذائي المصري الذكي</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
        }

        .hidden {
            display: none !important;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }

        .safe-pb {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-800 safe-pb">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-md mx-auto px-4 py-3 flex justify-between items-center">
            <button onclick="router('home')" class="flex items-center gap-2 cursor-pointer border-none bg-transparent">
                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <i data-lucide="leaf" class="text-green-600 w-5 h-5"></i>
                </div>
                <div class="text-right">
                    <h1 class="text-lg font-bold text-green-800 leading-none">الهرم الذكي</h1>
                    <span class="text-[10px] text-gray-500">لصحة البيت المصري</span>
                </div>
            </button>
            <button id="home-btn" onclick="router('home')"
                class="hidden p-2 text-gray-400 hover:text-green-600 bg-gray-50 rounded-full cursor-pointer border-none">
                <i data-lucide="home" class="w-5 h-5"></i>
            </button>
        </div>
    </header>

    <main class="max-w-md mx-auto min-h-[calc(100vh-60px)] relative">

        <!-- HOME VIEW -->
        <div id="view-home" class="view p-4 space-y-6 animate-fade-in">
            <div
                class="bg-gradient-to-br from-green-600 to-teal-800 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden">
                <div class="relative z-10">
                    <h2 class="text-3xl font-bold mb-2">أهلاً يا ست الكل ❤️</h2>
                    <p class="text-green-50 text-sm leading-relaxed mb-4 opacity-90">
                        عارفين إنك شايلة مسؤولية صحة البيت كله. التطبيق ده عشان يساعدك توفري صحة وفلوس وتعملي أكل يشبع
                        بجد.
                    </p>
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="router('pyramid')"
                            class="bg-white text-green-800 px-4 py-2.5 rounded-full text-sm font-bold shadow-md hover:bg-gray-50 transition flex items-center gap-2 cursor-pointer border-none">
                            شوفي الهرم <i data-lucide="arrow-left" class="w-4 h-4"></i>
                        </button>
                        <button onclick="router('calculator')"
                            class="bg-green-700/50 text-white border border-white/30 px-4 py-2.5 rounded-full text-sm font-bold shadow-md hover:bg-green-700 transition flex items-center gap-2 cursor-pointer">
                            <i data-lucide="calculator" class="w-4 h-4"></i> أحسب احتياجي
                        </button>
                    </div>
                </div>
                <div class="absolute top-[-20px] left-[-20px] w-32 h-32 bg-white opacity-10 rounded-full"></div>
            </div>

            <div>
                <h3 class="font-bold text-gray-800 mb-3 px-1">أدوات ذكية ليكي:</h3>
                <div class="grid grid-cols-2 gap-3">
                    <!-- Cards will be cleaner with HTML -->
                    <div onclick="router('calculator')"
                        class="bg-emerald-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] border-none ring-2 ring-emerald-500/30">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="calculator" class="text-emerald-600"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">حاسبة البروتين</h3>
                            <p class="text-[10px] text-gray-500">آكل كام بيضة وفرخة؟</p>
                        </div>
                    </div>

                    <div onclick="router('personas')"
                        class="bg-indigo-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="users" class="text-indigo-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">لكل العيلة</h3>
                            <p class="text-[10px] text-gray-500">رياضيين، أطفال، وسيدات</p>
                        </div>
                    </div>

                    <div onclick="router('pyramid')"
                        class="bg-blue-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="activity" class="text-blue-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">الهرم بالتفصيل</h3>
                            <p class="text-[10px] text-gray-500">إيه ناكله وإيه نقلله؟</p>
                        </div>
                    </div>

                    <div onclick="router('swaps')"
                        class="bg-orange-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="utensils" class="text-orange-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">بدائل المطبخ</h3>
                            <p class="text-[10px] text-gray-500">إزاي نستبدل الفينو والزيت؟</p>
                        </div>
                    </div>

                    <div onclick="router('plan')"
                        class="bg-purple-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="scale" class="text-purple-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">خطة الأكل</h3>
                            <p class="text-[10px] text-gray-500">أفكار للفطار والغدا</p>
                        </div>
                    </div>

                    <div onclick="router('why')"
                        class="bg-red-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="heart" class="text-red-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ليه اتغيرنا؟</h3>
                            <p class="text-[10px] text-gray-500">القديم كان غلط؟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PYRAMID VIEW -->
        <div id="view-pyramid" class="view hidden p-4 animate-fade-in pb-8">
            <h2 class="text-xl font-bold mb-4 text-right">الهرم التفاعلي</h2>
            <div id="pyramid-container" class="flex flex-col items-center gap-1">
                <!-- Javascript will render levels here -->
            </div>
            <div id="pyramid-details"
                class="hidden mt-6 bg-white p-5 rounded-2xl shadow-xl border-r-4 border-green-500 animate-slide-up text-right">
                <!-- Details injected here -->
            </div>
        </div>

        <!-- CALCULATOR VIEW -->
        <div id="view-calculator" class="view hidden p-4 animate-fade-in pb-20">
            <div class="bg-emerald-600 rounded-3xl p-6 text-white shadow-lg mb-6">
                <h2 class="text-2xl font-bold flex items-center gap-2 mb-1">
                    <i data-lucide="calculator" class="w-6 h-6"></i> حاسبة البروتين
                </h2>
                <p class="text-emerald-100 text-sm">احسبي احتياجك واحتياج ولادك بالظبط.</p>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-5 mb-6 space-y-6 text-right">
                <!-- Personas -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-3">أنا مين؟</label>
                    <div class="grid grid-cols-4 gap-2">
                        <button onclick="setCalcPersona('kid')" id="btn-p-kid"
                            class="calc-btn-persona flex flex-col items-center p-3 rounded-xl border-2 transition-all cursor-pointer border-none bg-gray-100 text-gray-400">
                            <span class="text-[10px] font-bold">طفل بينمو</span>
                        </button>
                        <button onclick="setCalcPersona('woman')" id="btn-p-woman"
                            class="calc-btn-persona flex flex-col items-center p-3 rounded-xl border-2 transition-all cursor-pointer border-none bg-emerald-500 text-white">
                            <span class="text-[10px] font-bold">سيدة</span>
                        </button>
                        <button onclick="setCalcPersona('man')" id="btn-p-man"
                            class="calc-btn-persona flex flex-col items-center p-3 rounded-xl border-2 transition-all cursor-pointer border-none bg-gray-100 text-gray-400">
                            <span class="text-[10px] font-bold">رجل</span>
                        </button>
                        <button onclick="setCalcPersona('athlete')" id="btn-p-athlete"
                            class="calc-btn-persona flex flex-col items-center p-3 rounded-xl border-2 transition-all cursor-pointer border-none bg-gray-100 text-gray-400">
                            <span class="text-[10px] font-bold">رياضي</span>
                        </button>
                    </div>
                </div>

                <!-- Weight -->
                <div>
                    <div class="flex justify-between mb-2">
                        <label class="text-sm font-bold text-gray-700">الوزن:</label>
                        <span id="weight-display" class="text-emerald-600 font-bold">70 كجم</span>
                    </div>
                    <input type="range" id="weight-input" min="20" max="150" value="70"
                        class="w-full h-2 bg-gray-200 rounded-lg accent-emerald-600 cursor-pointer">
                </div>

                <!-- Activity -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-3">مجهودي اليومي:</label>
                    <div class="flex gap-2 bg-gray-100 p-1 rounded-xl">
                        <button onclick="setCalcActivity('low')" id="btn-a-low"
                            class="calc-btn-activity flex-1 py-2 text-xs font-bold rounded-lg transition-all cursor-pointer border-none text-gray-500">قليل</button>
                        <button onclick="setCalcActivity('medium')" id="btn-a-medium"
                            class="calc-btn-activity flex-1 py-2 text-xs font-bold rounded-lg transition-all cursor-pointer border-none bg-white text-emerald-600 shadow-sm">متوسط</button>
                        <button onclick="setCalcActivity('high')" id="btn-a-high"
                            class="calc-btn-activity flex-1 py-2 text-xs font-bold rounded-lg transition-all cursor-pointer border-none text-gray-500">عالي</button>
                    </div>
                </div>
            </div>

            <!-- Results -->
            <div class="bg-slate-900 rounded-3xl p-6 text-white shadow-xl space-y-6">
                <div class="text-center border-b border-white/10 pb-6">
                    <p id="target-label" class="text-gray-400 text-xs">الهدف اليومي لـ سيدة</p>
                    <h3 id="target-value" class="text-4xl font-extrabold text-emerald-400">84 جرام</h3>
                </div>

                <div class="relative z-10">
                    <h4 class="text-emerald-300 font-bold text-xs mb-3 flex items-center justify-center gap-2">
                        <i data-lucide="info" class="w-4 h-4"></i>
                        الرقم ده يساوي إيه؟ (لو أكلت صنف واحد فقط)
                    </h4>
                    <div id="equivalents-grid" class="grid grid-cols-2 gap-3">
                        <!-- JS injected -->
                    </div>
                </div>

                <div class="relative z-10 bg-white/5 p-4 rounded-xl border border-white/10">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-emerald-300 font-bold text-sm flex items-center gap-2">
                            <i data-lucide="utensils" class="w-4 h-4"></i>
                            أوزعهم إزاي؟
                        </h4>
                        <div class="bg-white/10 p-1 rounded-lg flex text-[10px]">
                            <button onclick="setMealCount(3)" id="btn-m-3"
                                class="px-3 py-1 rounded-md transition cursor-pointer border-none bg-emerald-500 text-white shadow">3
                                وجبات</button>
                            <button onclick="setMealCount(2)" id="btn-m-2"
                                class="px-3 py-1 rounded-md transition cursor-pointer border-none text-gray-400">وجبتين</button>
                        </div>
                    </div>
                    <div id="meals-list" class="space-y-3">
                        <!-- JS injected -->
                    </div>
                </div>
            </div>

            <div class="mt-8 space-y-4">
                <h3 class="font-bold text-gray-800 px-1">سؤال وجواب ع الماشي:</h3>
                <div class="bg-red-50 p-4 rounded-2xl border border-red-100 flex gap-3">
                    <i data-lucide="alert-triangle" class="w-6 h-6 text-red-500 flex-shrink-0"></i>
                    <div>
                        <h4 class="font-bold text-red-700 text-sm mb-1">لو أكلت أقل من كدة؟</h4>
                        <p class="text-xs text-red-600 leading-relaxed">شعرك ممكن يقع، ضوافرك تتكسر، وهتحسي بجوع دايماً
                            ونهم للسكريات.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- PERSONAS VIEW -->
        <div id="view-personas" class="view hidden p-4 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">نصائح مخصصة</h2>
            <div class="flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide">
                <button onclick="setPersonaInfo('athlete')" id="btn-info-athlete"
                    class="persona-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all border-none bg-indigo-600 text-white"><i
                        data-lucide="dumbbell" class="w-5 h-5"></i> رياضي</button>
                <button onclick="setPersonaInfo('kids')" id="btn-info-kids"
                    class="persona-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all border-none bg-white text-gray-600 border border-gray-100 shadow-sm"><i
                        data-lucide="baby" class="w-5 h-5"></i> أطفال</button>
                <button onclick="setPersonaInfo('women')" id="btn-info-women"
                    class="persona-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all border-none bg-white text-gray-600 border border-gray-100 shadow-sm"><i
                        data-lucide="user-check" class="w-5 h-5"></i> سيدات</button>
                <button onclick="setPersonaInfo('men')" id="btn-info-men"
                    class="persona-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all border-none bg-white text-gray-600 border border-gray-100 shadow-sm"><i
                        data-lucide="smile" class="w-5 h-5"></i> رجال</button>
            </div>
            <div class="bg-white rounded-3xl p-6 shadow-lg border border-gray-100 text-right">
                <h3 id="persona-title" class="text-xl font-bold mb-2 text-indigo-700">نصيحة لـ رياضي</h3>
                <p id="persona-text" class="text-sm text-gray-600 leading-relaxed">ركز على البروتين العالي (1.6 - 2
                    جرام/كجم) لتعافي العضلات. الكربوهيدرات المعقدة قبل التمرين مهمة للطاقة.</p>
            </div>
        </div>

        <!-- OTHER VIEWS (Swaps, Plans, Why) - Static content -->
        <div id="view-swaps" class="view hidden p-4 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">بدائل صحية</h2>
            <div class="space-y-4">
                <!-- Example Card 1 -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="bg-gray-50 px-4 py-2 border-b border-gray-100 flex justify-between items-center">
                        <h3 class="font-bold text-gray-800 text-sm">الفينو والمخبوزات</h3>
                        <div class="bg-green-100 text-green-700 text-[10px] px-2 py-0.5 rounded-full font-bold">بديل ذكي
                        </div>
                    </div>
                    <div class="p-4 grid grid-cols-[1fr,auto,1fr] gap-2 items-center text-center">
                        <div class="text-red-500 font-bold text-xs mb-1 line-through opacity-60">عيش فينو</div>
                        <i data-lucide="arrow-right" class="text-green-500 w-4 h-4 mx-auto"></i>
                        <div class="text-green-700 font-bold text-xs mb-1">عيش بلدي (ردة)</div>
                    </div>
                    <div class="px-4 pb-4 pt-0 text-right">
                        <p
                            class="text-[10px] text-gray-500 bg-gray-50 p-2 rounded-lg leading-relaxed border border-gray-100">
                            <span class="font-bold text-gray-600">السبب:</span> الردة بتقلل امتصاص السكر وتشبع لفترة
                            أطول.</p>
                    </div>
                </div>
                <!-- More cards can be added similarly -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="bg-gray-50 px-4 py-2 border-b border-gray-100 flex justify-between items-center">
                        <h3 class="font-bold text-gray-800 text-sm">طاسة القلي</h3>
                        <div class="bg-green-100 text-green-700 text-[10px] px-2 py-0.5 rounded-full font-bold">بديل ذكي
                        </div>
                    </div>
                    <div class="p-4 grid grid-cols-[1fr,auto,1fr] gap-2 items-center text-center">
                        <div class="text-red-500 font-bold text-xs mb-1 line-through opacity-60">قلي بزيت غزير</div>
                        <i data-lucide="arrow-right" class="text-green-500 w-4 h-4 mx-auto"></i>
                        <div class="text-green-700 font-bold text-xs mb-1">شوي / قلاية هوائية</div>
                    </div>
                    <div class="px-4 pb-4 pt-0 text-right">
                        <p
                            class="text-[10px] text-gray-500 bg-gray-50 p-2 rounded-lg leading-relaxed border border-gray-100">
                            <span class="font-bold text-gray-600">السبب:</span> تقليل السعرات والدهون المهدرجة الضارة.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-plan" class="view hidden p-4 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">خطة الأكل المقترحة</h2>
            <div class="space-y-4">
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100 relative overflow-hidden">
                    <div class="flex items-center gap-3 mb-3 border-b border-gray-50 pb-3">
                        <div class="text-green-600 bg-green-50 p-2 rounded-lg"><i data-lucide="egg" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">الفطار</h3><span
                                class="text-[10px] text-gray-400 bg-gray-50 px-2 py-0.5 rounded-full">7:00 AM</span>
                        </div>
                    </div>
                    <ul class="space-y-2 pr-4 list-disc text-xs text-gray-600">
                        <li>فول بالزيت الحار والكمون</li>
                        <li>جبنة قريش بالطماطم</li>
                        <li>بيض مسلوق</li>
                    </ul>
                </div>
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100 relative overflow-hidden">
                    <div class="flex items-center gap-3 mb-3 border-b border-gray-50 pb-3">
                        <div class="text-green-600 bg-green-50 p-2 rounded-lg"><i data-lucide="utensils"
                                class="w-5 h-5"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">الغداء</h3><span
                                class="text-[10px] text-gray-400 bg-gray-50 px-2 py-0.5 rounded-full">3:00 PM</span>
                        </div>
                    </div>
                    <ul class="space-y-2 pr-4 list-disc text-xs text-gray-600">
                        <li>طبق سلطة كبير (أساسي)</li>
                        <li>بروتين (فراخ/سمك/لحمة)</li>
                        <li>نشويات (أرز/فريك) بكمية قليلة</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="view-why" class="view hidden p-4 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ليه غيرنا النظام؟</h2>
            <div class="bg-white p-4 rounded-xl border-r-4 border-green-500 shadow-sm text-right mb-4">
                <h3 class="font-bold text-gray-800 text-sm mb-2">تحديث العلم</h3>
                <p class="text-xs text-gray-600 leading-relaxed">الأبحاث الجديدة أثبتت أن تقليل النشويات والاعتماد على
                    الدهون الصحية والبروتين أفضل للصحة والوقاية من الأمراض.</p>
            </div>
            <div class="bg-white p-4 rounded-xl border-r-4 border-green-500 shadow-sm text-right">
                <h3 class="font-bold text-gray-800 text-sm mb-2">مشاكل السمنة</h3>
                <p class="text-xs text-gray-600 leading-relaxed">النظام القديم كان بيعتمد بشكل كبير على النشويات اللي
                    بتزود الوزن وبتعمل مقاومة أنسولين.</p>
            </div>
        </div>

    </main>

    <script src="script.js"></script>
</body>

</html>