<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงููุฑู ุงูุบุฐุงุฆู ุงููุตุฑู ุงูุฐูู</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap"
        rel="stylesheet">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#16a34a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ุงููุฑู ุงูุฐูู">
    <link rel="apple-touch-icon" href="assets/icon-512.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
        }

        .hidden {
            display: none !important;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }

        .safe-pb {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-800 safe-pb">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-md mx-auto px-4 py-3 flex justify-between items-center">
            <button onclick="router('home')" class="flex items-center gap-2 cursor-pointer border-none bg-transparent">
                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                    <i data-lucide="leaf" class="text-green-600 w-5 h-5"></i>
                </div>
                <div class="text-right">
                    <h1 class="text-lg font-bold text-green-800 leading-none">ุงููุฑู ุงูุฐูู</h1>
                    <span class="text-[10px] text-gray-500">ูุตุญุฉ ุงูุจูุช ุงููุตุฑู</span>
                </div>
            </button>
            <div class="flex items-center gap-2">
                <button id="install-btn"
                    class="hidden bg-green-600 text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-md hover:bg-green-700 transition cursor-pointer border-none flex items-center gap-1">
                    <i data-lucide="download" class="w-4 h-4"></i> ุชุซุจูุช
                </button>
                <button id="home-btn" onclick="router('home')"
                    class="hidden p-2 text-gray-400 hover:text-green-600 bg-gray-50 rounded-full cursor-pointer border-none">
                    <i data-lucide="home" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- PWA Install Prompt (iOS) -->
    <div id="ios-install-prompt"
        class="hidden fixed bottom-0 left-0 right-0 bg-white p-4 shadow-2xl z-[100] border-t-4 border-green-500 rounded-t-2xl animate-slide-up text-center">
        <h3 class="font-bold text-gray-800 mb-2">ุชุซุจูุช ุงูุชุทุจูู ุนูู ุงูุขูููู ๐ฑ</h3>
        <p class="text-sm text-gray-600 mb-4">ุนุดุงู ุงูุชุทุจูู ูุดุชุบู ูุนุงู ุจุฏูู ูุช ูุจูุงูู ุงูุดุงุดุฉ:</p>
        <div class="flex items-center justify-center gap-2 text-sm text-gray-700 bg-gray-50 p-3 rounded-xl mb-4 mx-4">
            <span>ุงุถุบุท ุนูู</span>
            <span class="inline-block"><i data-lucide="share" class="w-5 h-5 text-blue-500"></i></span>
            <span>ุซู</span>
            <span class="inline-block font-bold">"Add to Home Screen"</span>
            <span class="inline-block"><i data-lucide="plus-square" class="w-5 h-5 text-gray-500"></i></span>
        </div>
        <button onclick="document.getElementById('ios-install-prompt').classList.add('hidden')"
            class="text-green-600 font-bold text-sm border-none bg-transparent cursor-pointer">ูููุชุ ุดูุฑุงู ๐</button>
    </div>

    <main class="max-w-md mx-auto min-h-[calc(100vh-60px)] relative">

        <!-- HOME VIEW -->
        <div id="view-home" class="view p-4 space-y-6 animate-fade-in">
            <div
                class="bg-gradient-to-br from-green-600 to-teal-800 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden">
                <div class="relative z-10">
                    <h2 class="text-3xl font-bold mb-2">ุฃููุงู ูุง ุณุช ุงููู โค๏ธ</h2>
                    <p class="text-green-50 text-sm leading-relaxed mb-4 opacity-90">
                        ุนุงุฑููู ุฅูู ุดุงููุฉ ูุณุคูููุฉ ุตุญุฉ ุงูุจูุช ููู. ุงูุชุทุจูู ุฏู ุนุดุงู ูุณุงุนุฏู ุชููุฑู ุตุญุฉ ููููุณ ูุชุนููู ุฃูู ูุดุจุน
                        ุจุฌุฏ.
                    </p>
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="router('pyramid')"
                            class="bg-white text-green-800 px-4 py-2.5 rounded-full text-sm font-bold shadow-md hover:bg-gray-50 transition flex items-center gap-2 cursor-pointer border-none">
                            ุดููู ุงููุฑู <i data-lucide="arrow-left" class="w-4 h-4"></i>
                        </button>
                        <button onclick="router('calculator')"
                            class="bg-green-700/50 text-white border border-white/30 px-4 py-2.5 rounded-full text-sm font-bold shadow-md hover:bg-green-700 transition flex items-center gap-2 cursor-pointer">
                            <i data-lucide="calculator" class="w-4 h-4"></i> ุฃุญุณุจ ุงุญุชูุงุฌู
                        </button>
                    </div>
                </div>
                <div class="absolute top-[-20px] left-[-20px] w-32 h-32 bg-white opacity-10 rounded-full"></div>
            </div>

            <div>
                <h3 class="font-bold text-gray-800 mb-3 px-1">ุฃุฏูุงุช ุฐููุฉ ูููู:</h3>
                <div class="grid grid-cols-2 gap-3">
                    <!-- Cards will be cleaner with HTML -->
                    <div onclick="router('calculator')"
                        class="bg-emerald-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] border-none ring-2 ring-emerald-500/30">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="calculator" class="text-emerald-600"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ุญุงุณุจุฉ ุงูุจุฑูุชูู</h3>
                            <p class="text-[10px] text-gray-500">ุขูู ูุงู ุจูุถุฉ ููุฑุฎุฉุ</p>
                        </div>
                    </div>

                    <div onclick="router('personas')"
                        class="bg-indigo-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="users" class="text-indigo-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ููู ุงูุนููุฉ</h3>
                            <p class="text-[10px] text-gray-500">ุฑูุงุถูููุ ุฃุทูุงูุ ูุณูุฏุงุช</p>
                        </div>
                    </div>

                    <div onclick="router('pyramid')"
                        class="bg-blue-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="activity" class="text-blue-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ุงููุฑู ุจุงูุชูุตูู</h3>
                            <p class="text-[10px] text-gray-500">ุฅูู ูุงููู ูุฅูู ูููููุ</p>
                        </div>
                    </div>

                    <div onclick="router('swaps')"
                        class="bg-orange-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="utensils" class="text-orange-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ุจุฏุงุฆู ุงููุทุจุฎ</h3>
                            <p class="text-[10px] text-gray-500">ุฅุฒุงู ูุณุชุจุฏู ุงููููู ูุงูุฒูุชุ</p>
                        </div>
                    </div>

                    <div onclick="router('plan')"
                        class="bg-purple-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="scale" class="text-purple-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ุฎุทุฉ ุงูุฃูู</h3>
                            <p class="text-[10px] text-gray-500">ุฃููุงุฑ ูููุทุงุฑ ูุงูุบุฏุง</p>
                        </div>
                    </div>

                    <div onclick="router('why')"
                        class="bg-red-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="heart" class="text-red-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ููู ุงุชุบูุฑูุงุ</h3>
                            <p class="text-[10px] text-gray-500">ุงููุฏูู ูุงู ุบูุทุ</p>
                        </div>
                    </div>

                    <div onclick="router('library')"
                        class="bg-rose-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="book-open" class="text-rose-500"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ูุงููุณ ุงูุฃูู</h3>
                            <p class="text-[10px] text-gray-500">ูุนุฑู ุจูุงูู ุฅูู</p>
                        </div>
                    </div>

                    <div onclick="router('builder')"
                        class="bg-lime-50 p-4 rounded-2xl text-right transition-transform hover:scale-105 cursor-pointer flex flex-col justify-between min-h-[110px] shadow-sm border-none ring-2 ring-lime-500/30">
                        <div class="bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-sm mb-2"><i
                                data-lucide="chef-hat" class="text-lime-600"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-sm">ุดูู ุทุจูู</h3>
                            <p class="text-[10px] text-gray-500">ุงุญุณุจ ูุฌุจุชู ุตุญ</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PYRAMID VIEW -->
        <div id="view-pyramid" class="view hidden p-4 animate-fade-in pb-8">
            <h2 class="text-xl font-bold mb-4 text-right">ุงููุฑู ุงูุชูุงุนูู</h2>
            <div id="pyramid-container" class="flex flex-col items-center gap-1">
                <!-- Javascript will render levels here -->
            </div>
            <div id="pyramid-details"
                class="hidden mt-6 bg-white p-5 rounded-2xl shadow-xl border-r-4 border-green-500 animate-slide-up text-right">
                <!-- Details injected here -->
            </div>
        </div>

        <!-- CALCULATOR VIEW -->
        <div id="view-calculator" class="view hidden p-4 animate-fade-in pb-20">
            <div class="bg-emerald-600 rounded-3xl p-6 text-white shadow-lg mb-6">
                <h2 class="text-2xl font-bold flex items-center gap-2 mb-1">
                    <i data-lucide="calculator" class="w-6 h-6"></i> ุญุงุณุจุฉ ุงูุจุฑูุชูู
                </h2>
                <p class="text-emerald-100 text-sm">ุงุญุณุจู ุงุญุชูุงุฌู ูุงุญุชูุงุฌ ููุงุฏู ุจุงูุธุจุท.</p>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-5 mb-6 space-y-6 text-right">
                <!-- Personas -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-3">ุฃูุง ูููุ</label>
                    <div class="grid grid-cols-4 gap-2">
                        <button onclick="setCalcPersona('kid')" id="btn-p-kid"
                            class="calc-btn-persona flex flex-col items-center p-3 rounded-xl border-2 transition-all cursor-pointer border-none bg-gray-100 text-gray-400">
                            <span class="text-[10px] font-bold">ุทูู ุจูููู</span>
                        </button>
                        <button onclick="setCalcPersona('woman')" id="btn-p-woman"
                            class="calc-btn-persona flex flex-col items-center p-3 rounded-xl border-2 transition-all cursor-pointer border-none bg-emerald-500 text-white">
                            <span class="text-[10px] font-bold">ุณูุฏุฉ</span>
                        </button>
                        <button onclick="setCalcPersona('man')" id="btn-p-man"
                            class="calc-btn-persona flex flex-col items-center p-3 rounded-xl border-2 transition-all cursor-pointer border-none bg-gray-100 text-gray-400">
                            <span class="text-[10px] font-bold">ุฑุฌู</span>
                        </button>
                        <button onclick="setCalcPersona('athlete')" id="btn-p-athlete"
                            class="calc-btn-persona flex flex-col items-center p-3 rounded-xl border-2 transition-all cursor-pointer border-none bg-gray-100 text-gray-400">
                            <span class="text-[10px] font-bold">ุฑูุงุถู</span>
                        </button>
                    </div>
                </div>

                <!-- Weight -->
                <div>
                    <div class="flex justify-between mb-2">
                        <label class="text-sm font-bold text-gray-700">ุงููุฒู:</label>
                        <span id="weight-display" class="text-emerald-600 font-bold">70 ูุฌู</span>
                    </div>
                    <input type="range" id="weight-input" min="20" max="150" value="70"
                        class="w-full h-2 bg-gray-200 rounded-lg accent-emerald-600 cursor-pointer">
                </div>

                <!-- Activity -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-3">ูุฌููุฏู ุงููููู:</label>
                    <div class="flex gap-2 bg-gray-100 p-1 rounded-xl">
                        <button onclick="setCalcActivity('low')" id="btn-a-low"
                            class="calc-btn-activity flex-1 py-2 text-xs font-bold rounded-lg transition-all cursor-pointer border-none text-gray-500">ูููู</button>
                        <button onclick="setCalcActivity('medium')" id="btn-a-medium"
                            class="calc-btn-activity flex-1 py-2 text-xs font-bold rounded-lg transition-all cursor-pointer border-none bg-white text-emerald-600 shadow-sm">ูุชูุณุท</button>
                        <button onclick="setCalcActivity('high')" id="btn-a-high"
                            class="calc-btn-activity flex-1 py-2 text-xs font-bold rounded-lg transition-all cursor-pointer border-none text-gray-500">ุนุงูู</button>
                    </div>
                </div>
            </div>

            <!-- Results -->
            <div class="bg-slate-900 rounded-3xl p-6 text-white shadow-xl space-y-6">
                <div class="text-center border-b border-white/10 pb-6">
                    <p id="target-label" class="text-gray-400 text-xs">ุงููุฏู ุงููููู ูู ุณูุฏุฉ</p>
                    <h3 id="target-value" class="text-4xl font-extrabold text-emerald-400">84 ุฌุฑุงู</h3>
                </div>

                <div class="relative z-10">
                    <h4 class="text-emerald-300 font-bold text-xs mb-3 flex items-center justify-center gap-2">
                        <i data-lucide="info" class="w-4 h-4"></i>
                        ุงูุฑูู ุฏู ูุณุงูู ุฅููุ (ูู ุฃููุช ุตูู ูุงุญุฏ ููุท)
                    </h4>
                    <div id="equivalents-grid" class="grid grid-cols-2 gap-3">
                        <!-- JS injected -->
                    </div>
                </div>

                <div class="relative z-10 bg-white/5 p-4 rounded-xl border border-white/10">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-emerald-300 font-bold text-sm flex items-center gap-2">
                            <i data-lucide="utensils" class="w-4 h-4"></i>
                            ุฃูุฒุนูู ุฅุฒุงูุ
                        </h4>
                        <div class="bg-white/10 p-1 rounded-lg flex text-[10px]">
                            <button onclick="setMealCount(3)" id="btn-m-3"
                                class="px-3 py-1 rounded-md transition cursor-pointer border-none bg-emerald-500 text-white shadow">3
                                ูุฌุจุงุช</button>
                            <button onclick="setMealCount(2)" id="btn-m-2"
                                class="px-3 py-1 rounded-md transition cursor-pointer border-none text-gray-400">ูุฌุจุชูู</button>
                        </div>
                    </div>
                    <div id="meals-list" class="space-y-3">
                        <!-- JS injected -->
                    </div>
                </div>
            </div>

            <div class="mt-8 space-y-4">
                <h3 class="font-bold text-gray-800 px-1">ุณุคุงู ูุฌูุงุจ ุน ุงููุงุดู:</h3>
                <div class="bg-red-50 p-4 rounded-2xl border border-red-100 flex gap-3">
                    <i data-lucide="alert-triangle" class="w-6 h-6 text-red-500 flex-shrink-0"></i>
                    <div>
                        <h4 class="font-bold text-red-700 text-sm mb-1">ูู ุฃููุช ุฃูู ูู ูุฏุฉุ</h4>
                        <p class="text-xs text-red-600 leading-relaxed">ุดุนุฑู ูููู ููุนุ ุถูุงูุฑู ุชุชูุณุฑุ ููุชุญุณู ุจุฌูุน ุฏุงููุงู
                            ูููู ููุณูุฑูุงุช.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- PERSONAS VIEW -->
        <div id="view-personas" class="view hidden p-4 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ูุตุงุฆุญ ูุฎุตุตุฉ</h2>
            <div class="flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide">
                <button onclick="setPersonaInfo('athlete')" id="btn-info-athlete"
                    class="persona-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all border-none bg-indigo-600 text-white"><i
                        data-lucide="dumbbell" class="w-5 h-5"></i> ุฑูุงุถู</button>
                <button onclick="setPersonaInfo('kids')" id="btn-info-kids"
                    class="persona-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all border-none bg-white text-gray-600 border border-gray-100 shadow-sm"><i
                        data-lucide="baby" class="w-5 h-5"></i> ุฃุทูุงู</button>
                <button onclick="setPersonaInfo('women')" id="btn-info-women"
                    class="persona-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all border-none bg-white text-gray-600 border border-gray-100 shadow-sm"><i
                        data-lucide="user-check" class="w-5 h-5"></i> ุณูุฏุงุช</button>
                <button onclick="setPersonaInfo('men')" id="btn-info-men"
                    class="persona-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold transition-all border-none bg-white text-gray-600 border border-gray-100 shadow-sm"><i
                        data-lucide="smile" class="w-5 h-5"></i> ุฑุฌุงู</button>
            </div>
            <div class="bg-white rounded-3xl p-6 shadow-lg border border-gray-100 text-right">
                <h3 id="persona-title" class="text-xl font-bold mb-2 text-indigo-700">ูุตูุญุฉ ูู ุฑูุงุถู</h3>
                <p id="persona-text" class="text-sm text-gray-600 leading-relaxed">ุฑูุฒ ุนูู ุงูุจุฑูุชูู ุงูุนุงูู (1.6 - 2
                    ุฌุฑุงู/ูุฌู) ูุชุนุงูู ุงูุนุถูุงุช. ุงููุฑุจูููุฏุฑุงุช ุงููุนูุฏุฉ ูุจู ุงูุชูุฑูู ูููุฉ ููุทุงูุฉ.</p>
            </div>
        </div>

        <!-- OTHER VIEWS (Swaps, Plans, Why) - Static content -->
        <div id="view-swaps" class="view hidden p-4 animate-fade-in pb-20">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ุจุฏุงุฆู ุตุญูุฉ (ููุฑู ุตุญุชู)</h2>
            <div class="space-y-4">

                <!-- Drinks -->
                <h3 class="font-bold text-gray-600 text-sm mt-4 mb-2 border-b pb-1">ุงููุดุฑูุจุงุช</h3>
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-4 grid grid-cols-[1fr,auto,1fr] gap-2 items-center text-center">
                        <div class="text-red-500 font-bold text-xs mb-1 line-through opacity-60">ูุดุฑูุจ ุบุงุฒู</div>
                        <i data-lucide="arrow-right" class="text-green-500 w-4 h-4 mx-auto"></i>
                        <div class="text-green-700 font-bold text-xs mb-1">ูุฑูุฏูู ุณุงูุน / ููุณูู</div>
                    </div>
                    <div class="px-4 pb-4 pt-0 text-right">
                        <p class="text-[10px] text-gray-500 bg-gray-50 p-2 rounded-lg leading-relaxed"><span
                                class="font-bold text-gray-600">ูููุ</span> ุงูุตูุฏุง ูููุง 10 ูุนุงูู ุณูุฑ ุจุชุถุฑุจ ุงูููุงุนุฉุ
                            ุงููุฑูุฏูู ุจูุธุจุท ุงูุถุบุท ูููุนุด.</p>
                    </div>
                </div>

                <!-- Snacks -->
                <h3 class="font-bold text-gray-600 text-sm mt-4 mb-2 border-b pb-1">ุงูุชุณุงูู</h3>
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-4 grid grid-cols-[1fr,auto,1fr] gap-2 items-center text-center">
                        <div class="text-red-500 font-bold text-xs mb-1 line-through opacity-60">ุดูุจุณู ูููุงุฏ ุญุงูุธุฉ</div>
                        <i data-lucide="arrow-right" class="text-green-500 w-4 h-4 mx-auto"></i>
                        <div class="text-green-700 font-bold text-xs mb-1">ุชุฑูุณ / ูุดุงุฑ ุจูุชู</div>
                    </div>
                    <div class="px-4 pb-4 pt-0 text-right">
                        <p class="text-[10px] text-gray-500 bg-gray-50 p-2 rounded-lg leading-relaxed"><span
                                class="font-bold text-gray-600">ูููุ</span> ุงูุชุฑูุณ ุจุฑูุชูู ูุจุงุชู ููุชุงุฒ ุจูุดุจุนุ ุงููุดุงุฑ
                            ุฃููุงู (ุจุณ ุจูุงุด ุฒูุช ูุชูุฑ).</p>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-4 grid grid-cols-[1fr,auto,1fr] gap-2 items-center text-center">
                        <div class="text-red-500 font-bold text-xs mb-1 line-through opacity-60">ุญูููุงุช ุดุฑููุฉ</div>
                        <i data-lucide="arrow-right" class="text-green-500 w-4 h-4 mx-auto"></i>
                        <div class="text-green-700 font-bold text-xs mb-1">ุจุทุงุทุง ูุดููุฉ / ูุงููุฉ</div>
                    </div>
                    <div class="px-4 pb-4 pt-0 text-right">
                        <p class="text-[10px] text-gray-500 bg-gray-50 p-2 rounded-lg leading-relaxed"><span
                                class="font-bold text-gray-600">ูููุ</span> ุงูุจุทุงุทุง ูุดููุงุช ูุนูุฏุฉ ูููุชุงููู ุฃุ ุงูุญูููุงุช
                            ุณูุฑ ูุฏููู ููุฏุฑุฌุฉ ุตุงูู.</p>
                    </div>
                </div>

                <!-- Mains -->
                <h3 class="font-bold text-gray-600 text-sm mt-4 mb-2 border-b pb-1">ุงูุฃุณุงุณูุงุช</h3>
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="bg-gray-50 px-4 py-2 border-b border-gray-100 flex justify-between items-center">
                        <h3 class="font-bold text-gray-800 text-sm">ุทุงุณุฉ ุงูููู</h3>
                        <div class="bg-green-100 text-green-700 text-[10px] px-2 py-0.5 rounded-full font-bold">ุจุฏูู ุฐูู
                        </div>
                    </div>
                    <div class="p-4 grid grid-cols-[1fr,auto,1fr] gap-2 items-center text-center">
                        <div class="text-red-500 font-bold text-xs mb-1 line-through opacity-60">ููู ุจุฒูุช ุบุฒูุฑ</div>
                        <i data-lucide="arrow-right" class="text-green-500 w-4 h-4 mx-auto"></i>
                        <div class="text-green-700 font-bold text-xs mb-1">ุดูู / ููุงูุฉ ููุงุฆูุฉ</div>
                    </div>
                    <div class="px-4 pb-4 pt-0 text-right">
                        <p class="text-[10px] text-gray-500 bg-gray-50 p-2 rounded-lg leading-relaxed"><span
                                class="font-bold text-gray-600">ุงูุณุจุจ:</span> ุงูููู ุจูุญูู ุงูุฏููู ูุณููู ูุจูุนูู ุงูุณุนุฑุงุช
                            ุงูุถุนู.</p>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-4 grid grid-cols-[1fr,auto,1fr] gap-2 items-center text-center">
                        <div class="text-red-500 font-bold text-xs mb-1 line-through opacity-60">ุนูุด ูููู</div>
                        <i data-lucide="arrow-right" class="text-green-500 w-4 h-4 mx-auto"></i>
                        <div class="text-green-700 font-bold text-xs mb-1">ุนูุด ุจูุฏู (ุฑุฏุฉ)</div>
                    </div>
                    <div class="px-4 pb-4 pt-0 text-right">
                        <p class="text-[10px] text-gray-500 bg-gray-50 p-2 rounded-lg leading-relaxed"><span
                                class="font-bold text-gray-600">ุงูุณุจุจ:</span> ุงูุฑุฏุฉ ุจุชููู ุงูุชุตุงุต ุงูุณูุฑ ูุชุดุจุน ููุชุฑุฉ ุฃุทูู.
                        </p>
                    </div>
                </div>

            </div>
        </div>

        <div id="view-plan" class="view hidden p-4 animate-fade-in pb-20">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ุฎุทุท ุฃูู ููุชุฑุญุฉ</h2>

            <!-- Tabs -->
            <div class="flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide">
                <button onclick="setPlanTab('balanced')" id="btn-plan-balanced"
                    class="plan-tab-btn bg-green-600 text-white px-4 py-2 rounded-full whitespace-nowrap text-xs font-bold transition-all border-none shadow-md cursor-pointer">ุงููุชูุงุฒู
                    (ุงูุฃุดูุฑ)</button>
                <button onclick="setPlanTab('economic')" id="btn-plan-economic"
                    class="plan-tab-btn bg-white text-gray-500 px-4 py-2 rounded-full whitespace-nowrap text-xs font-bold transition-all border border-gray-100 cursor-pointer">ุงูุชูููุฑ
                    ุงูุฐูู</button>
                <button onclick="setPlanTab('quick')" id="btn-plan-quick"
                    class="plan-tab-btn bg-white text-gray-500 px-4 py-2 rounded-full whitespace-nowrap text-xs font-bold transition-all border border-gray-100 cursor-pointer">ุงูุณุฑูุน
                    (ููุฃููุงุช)</button>
            </div>

            <!-- Content Container -->
            <div id="plan-content" class="space-y-4">
                <!-- JS injected content -->
            </div>
        </div>

        <div id="view-why" class="view hidden p-4 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ููู ุบูุฑูุง ุงููุธุงูุ</h2>
            <div class="bg-white p-4 rounded-xl border-r-4 border-green-500 shadow-sm text-right mb-4">
                <h3 class="font-bold text-gray-800 text-sm mb-2">ุชุญุฏูุซ ุงูุนูู</h3>
                <p class="text-xs text-gray-600 leading-relaxed">ุงูุฃุจุญุงุซ ุงูุฌุฏูุฏุฉ ุฃุซุจุชุช ุฃู ุชูููู ุงููุดููุงุช ูุงูุงุนุชูุงุฏ ุนูู
                    ุงูุฏููู ุงูุตุญูุฉ ูุงูุจุฑูุชูู ุฃูุถู ููุตุญุฉ ูุงูููุงูุฉ ูู ุงูุฃูุฑุงุถ.</p>
            </div>
            <div class="bg-white p-4 rounded-xl border-r-4 border-green-500 shadow-sm text-right">
                <h3 class="font-bold text-gray-800 text-sm mb-2">ูุดุงูู ุงูุณููุฉ</h3>
                <p class="text-xs text-gray-600 leading-relaxed">ุงููุธุงู ุงููุฏูู ูุงู ุจูุนุชูุฏ ุจุดูู ูุจูุฑ ุนูู ุงููุดููุงุช ุงููู
                    ุจุชุฒูุฏ ุงููุฒู ูุจุชุนูู ููุงููุฉ ุฃูุณูููู.</p>
            </div>
        </div>

        <!-- NEW: FOOD LIBRARY VIEW -->
        <div id="view-library" class="view hidden p-4 animate-fade-in pb-20">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ูุงููุณ ุงูุฃูู ุงููุตุฑู</h2>
            <div class="relative mb-6">
                <input type="text" id="lib-search" placeholder="ุงุจุญุซ ุนู ุฃููุฉ (ูุซูุงู: ุทุนููุฉุ ุจูุถ)..."
                    class="w-full bg-white border border-gray-200 rounded-xl py-3 px-4 pr-10 focus:outline-none focus:ring-2 focus:ring-green-500 text-right">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i data-lucide="search" class="text-gray-400 w-5 h-5"></i>
                </div>
            </div>

            <div id="lib-results" class="space-y-3">
                <!-- JS will populate -->
            </div>
        </div>

        <!-- NEW: PLATE BUILDER VIEW -->
        <div id="view-builder" class="view hidden p-4 animate-fade-in pb-20">
            <div class="bg-white rounded-3xl p-6 shadow-sm border border-gray-100 mb-6 text-center">
                <h2 class="text-xl font-bold text-gray-800 mb-1">ุดููู ุทุจูู</h2>
                <p class="text-xs text-gray-500 mb-4">ุงุฎุชุงุฑ ููููุงุช ูุฌุจุชู ูุดูู ุงููุชูุฌุฉ</p>

                <div class="flex justify-center gap-2 mb-4">
                    <button onclick="setBuilderMeal('breakfast')" id="btn-bm-breakfast"
                        class="px-4 py-2 rounded-full text-xs font-bold bg-green-100 text-green-700 cursor-pointer border-none shadow-sm transition-all">ูุทุงุฑ</button>
                    <button onclick="setBuilderMeal('lunch')" id="btn-bm-lunch"
                        class="px-4 py-2 rounded-full text-xs font-bold bg-gray-100 text-gray-500 cursor-pointer border-none transition-all">ุบุฏุงุก</button>
                    <button onclick="setBuilderMeal('dinner')" id="btn-bm-dinner"
                        class="px-4 py-2 rounded-full text-xs font-bold bg-gray-100 text-gray-500 cursor-pointer border-none transition-all">ุนุดุงุก</button>
                </div>

                <div class="relative h-4 bg-gray-100 rounded-full overflow-hidden mb-1">
                    <div id="builder-bar" class="absolute top-0 right-0 h-full bg-green-500 transition-all duration-500"
                        style="width: 0%"></div>
                </div>
                <div class="flex justify-between text-[10px] text-gray-400 font-bold px-1">
                    <span id="builder-percentage">0% ูู ุงููุฌุจุฉ</span>
                    <span id="builder-total">0 ุฌุฑุงู ุจุฑูุชูู</span>
                </div>
                <div id="builder-msg" class="text-xs font-bold mt-2 text-orange-500 h-5"></div>
            </div>

            <div class="mb-6">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-bold text-gray-800 text-sm">ููููุงุช ุงูุทุจู:</h3>
                    <button onclick="openFoodSelector()"
                        class="bg-green-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1 shadow hover:bg-green-700 transition cursor-pointer border-none">
                        <i data-lucide="plus" class="w-4 h-4"></i> ุฅุถุงูุฉ
                    </button>
                </div>
                <div id="builder-items" class="space-y-2">
                    <div
                        class="text-center text-gray-400 py-8 text-sm bg-gray-50 rounded-xl border border-dashed border-gray-200">
                        ูุณุฉ ูุงุถููุชุด ุญุงุฌุฉ ููุทุจู
                    </div>
                </div>
            </div>
        </div>

        <!-- Food Selector Modal -->
        <div id="food-modal"
            class="hidden fixed inset-0 z-[60] bg-black/50 flex items-end sm:items-center justify-center p-4 backdrop-blur-sm animate-fade-in text-right">
            <div
                class="bg-white w-full max-w-sm rounded-3xl p-5 max-h-[80vh] overflow-y-auto shadow-2xl animate-slide-up">
                <div class="flex justify-between items-center mb-4">
                    <button onclick="closeFoodSelector()"
                        class="p-1 rounded-full bg-gray-100 text-gray-500 cursor-pointer border-none"><i data-lucide="x"
                            class="w-5 h-5"></i></button>
                    <h3 class="font-bold text-lg">ุงุฎุชุฑ ุตูู</h3>
                </div>
                <div class="relative mb-3">
                    <input type="text" id="modal-search" placeholder="ุงุจุญุซ..."
                        class="w-full bg-gray-50 border border-gray-200 rounded-lg py-2 px-3 pr-8 text-sm focus:outline-none focus:ring-1 focus:ring-green-500 text-right">
                    <i data-lucide="search" class="absolute right-2 top-2.5 text-gray-400 w-4 h-4"></i>
                </div>
                <div class="space-y-2" id="modal-food-list">
                    <!-- JS Injected -->
                </div>
            </div>
        </div>

    </main>

    <script src="script.js"></script>
</body>

</html>